<!-- https://angular.io/guide/forms -->
<form [formGroup]='addRecipeForm' (ngSubmit)="createNewRecipe()" autocomplete="off">
    <h2>Create a new recipe</h2>

<div class="form-group">
    <input type="text" class="form-control" formControlName='name' placeholder="Name">
</div>


<div class="form-group">
    <input type="text" class="form-control" formControlName='description' placeholder="Description">
</div>

<div class="form-group">
    <label>Difficulty</label>
    <select class="form-control" formControlName='difficultylevel' >
        <option *ngFor="let diffName of enumKeys" [value]="diffName">
            {{difficultyLevel[diffName]}}       
        </option> 
    </select>    
</div>

<div class="form-group">
    <label>Preparation</label>
    <select class="form-control" formControlName="preparationtime" >
        <option *ngFor="let prepName of preparationTimeKeys" [value]="prepName">
            {{preparationTime[prepName]}}       
        </option> 
    </select>
    
</div>

<div class="form-group">
    <label>Category</label>
    <select class="form-control" formControl='categoryid'>
        <option *ngFor="let category of allCategories" [value]="category.id">
            {{category.name}}       
        </option> 
    </select>    
</div>

<div class="form-group text-center">
    <button class="btn btn-success mr-2" type="button" (click)="addIngredients()" >Add Ingredient</button>        
</div> 
In:
  <div formArrayName="ingredients">
    <div *ngFor="let ingredient of ingredients().controls; let i=index">
      <div [formGroupName]="i">
        {{i}}
        ingr quantity :
        <input type="text" formControlName="quantity">
        ingr:
        <input type="text" formControlName="ingr">
        measure:
        <input type="text" formControlName="measure">
        <button (click)="removeIngredient(i)">Remove ingr</button>
      </div>
    </div>
  </div>

<div class="form-group text-center">
    <button class="btn btn-success mr-2" type="submit">Add</button>
    <button class="btn btn-default mr-2" type="button" (click)="cancel()">Cancel</button>
</div>



  

<p>Form value: {{addRecipeForm.value | json}} </p>
<p>Form status: {{addRecipeForm.status | json}} </p>

<p>nester array: 
{{this.addRecipeForm.value | json}}  </p>
    <!-- <div class="form-group">
        <label>Name</label>
        <input type="text" class="form-control" name="name" [(ngModel)]="model.name" placeholder="Name" required #name="ngModel">
        <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
          Name is required
        </div>
    </div>

    <div class="form-group">
        <label>Description</label>
        <input type="text" class="form-control" name="description" [(ngModel)]="model.description" placeholder="Description">
    </div>

    <div class="form-group">
        <label>Difficulty</label>
        <select class="form-control" [(ngModel)]="model.difficultyLevel" name="diffL" required #diffL="ngModel">
            <option *ngFor="let diffName of enumKeys" [value]="diffName">
                {{difficultyLevel[diffName]}}       
            </option> 
        </select>
        <div [hidden]="diffL.valid || diffL.pristine" class="alert alert-danger">
            Difficulty is required
          </div>
    </div>

    <div class="form-group">
        <label>Preparation</label>
        <select class="form-control" [(ngModel)]="model.preparationTime" name="prepT" required #prepT="ngModel">
            <option *ngFor="let prepName of preparationTimeKeys" [value]="prepName">
                {{preparationTime[prepName]}}       
            </option> 
        </select>
        <div [hidden]="prepT.valid || prepT.pristine" class="alert alert-danger">
            Preparation is required
          </div>
    </div>
    
    <div class="form-group">
        <label>Category</label>
        <select class="form-control" [(ngModel)]="model.categoryId" name="categoryId" required #categoryId="ngModel">
            <option *ngFor="let category of allCategories" [value]="category.id">
                {{category.name}}       
            </option> 
        </select>
        <div [hidden]="categoryId.valid || categoryId.pristine" class="alert alert-danger">
            Category is required
          </div>
    </div>
     <div class="form-group text-center">
        <button class="btn btn-success mr-2" type="button" >Add Ingredient</button>        
    </div> 


    <div class="form-group text-center">
        <button class="btn btn-success mr-2" type="submit" [disabled]="!addRecipeForm.form.valid">Create</button>
        <button class="btn btn-default mr-2" type="button" (click)="cancel()">Cancel</button>
    </div> -->

</form>
