<div *ngIf="currentRecipe && editRecipe === false">
    <h1 >{{currentRecipe.name}}</h1>

    <div *ngIf="currentRecipe.userId === user.id">
        <button class="btn btn-default mr-2" (click)="editThisRecipe()">Edit Recipe</button>
        <button class="btn btn-default mr-2" (click)="editPhotos()">Edit Photos</button>
        <button class="btn btn-danger mr-2" (click)="deleteRecipe()" [disabled]="currentRecipe.countCookbooks > 0">Delete Recipe</button>
    </div>

    <h2>Basic informations</h2>
    <p>Author: {{currentRecipe.author}}</p>
    <p>Author: {{currentRecipe.userId}}</p>
    <p>Description: {{currentRecipe.description}}</p>
    <!-- <p>CountCookbooks: {{recipe.countCookbooks}}</p> -->
    <p>Rate: {{currentRecipe.rate}}</p>
    <p>Category: {{currentRecipe.category}}</p>
    <p>Difficulty Level Number: {{currentRecipe.difficultyLevel}}</p>
    <!-- <p>Difficulty: {{recipe.difficulty}}</p> -->
    <p>Preparation Time Number: {{currentRecipe.preparationTime}}</p>
    <!-- <p>Preparation: {{recipe.preparation}}</p> -->

    <h2>Ingredients</h2>
    <ul>
        <li *ngFor="let ingred of currentRecipe.recipeIngredients">
            {{ingred.quantity}} 
            <!-- {{ingred.measureName}} 
            {{ingred.ingredientName}} -->
            {{ingred.measure.name}} 
            {{ingred.ingredient.name}}
            <!-- {{ingred | json}} -->
        </li>
    </ul>

    <!-- <button class="btn btn-success" (click)="addToShoppingList()">Add all ingredients to shopping list</button>    -->
    <button class="btn btn-success" (click)="modalAddToShoppingList()">Add all ingredients to shopping list</button>     
      
    <!-- <h2>Directions</h2> -->
    <h2>Instructions</h2>
    <ol>
        <li *ngFor="let instruction of currentRecipe.instructions">
            {{instruction.description}}
        </li>
    </ol>
    <div *ngIf="canAddToCookbook === true">
        <button class="btn btn-success" (click)="addToCookbook()">Add recipe to Culinarybook</button>
    </div>
    <div *ngIf="canAddToCookbook === false">
        <button class="btn btn-danger" (click)="removeFromCookbook()">Remove recipe from Culinarybook</button>
    </div>
    <ol>
        <ul *ngFor="let photo of currentRecipe.photos">
            <img [src]="'data:image/jpeg;base64,'+photo.contentPhoto"/>
        </ul>
    </ol>
    
    <!-- <input type="file" class="file-upload" onchange="console.log(event.target.files)"> -->

    <!-- <input type="file" class="file-input" (change)="onFileSelected($event)" #fileUpload>
    <div class="file-upload">
        {{fileName || "No file uploaded yet."}}
        <button mat-mini-fab color="primary" class="upload-btn" (click)="fileUpload.click()">
            <mat-icon>attach_file</mat-icon>
        </button>
    </div> -->
    
</div>

<div *ngIf="editRecipe == true">    
    <app-recipe-new-form></app-recipe-new-form>
</div>
